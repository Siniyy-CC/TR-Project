<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€Šæ„›çš„è—è¡“ã€‹å½±å±•å…¥å ´åˆ¸ç”Ÿæˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           æ ¸å¿ƒé…è‰²ä¸çº¹ç†å®šä¹‰ (CSS Variables)
        ========================================= */
        :root {
            /* --- é»˜è®¤è§‚ä¼—ä¸»é¢˜ (Audience Theme) --- */
            --theme-bg-color: #fdfbf7; /* ç±³ç™½åº•è‰² */
            --theme-bg-texture: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAD2Cz0MAAAADFBMVEUAAAD////8/Pz///+///+/AAAAAnRSTlP/AOW3MEoAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnSURBVEiJ7dExAQAAAMKg9U9tCy+gAAAAAAAAAAAAAAAAAAAAvABzaAABFDm3GgAAAABJRU5ErkJggg=='); /* è½»å¾®çº¸å¼ é¢—ç²’çº¹ç† */
            
            --theme-header-bg: #8E3535; /* å¤å…¸çº¢ */
            /* è§‚ä¼—ç‰ˆé¡¶éƒ¨ï¼šçº¯è‰²æ— çº¹ç†ï¼Œæˆ–è€…ç®€å•çš„æ¸å˜ */
            --theme-header-texture: none; 

            --theme-text-main: #1a1a1a; /* ä¸»æ ‡é¢˜æ·±é»‘ */
            --theme-text-sub: #666; /* å‰¯æ ‡é¢˜æµ…ç° */
            --theme-accent: #8E3535; /* å¼ºè°ƒè‰²(åå­—/ä¼åˆ’å) */
            --theme-border: #ccc; /* è™šçº¿é¢œè‰² */
            --theme-admit-border: #999; /* Admit Oneè¾¹æ¡† */
            
            --theme-shadow: rgba(0,0,0,0.6);
        }

        /* --- å¯¼æ¼”ä¸»é¢˜è¦†å†™ (Director Theme Override) --- */
        .director-mode {
            --theme-bg-color: #1a1a1a; /* æ·±é»‘åº•è‰² */
            /* æ·±è‰²é‡ç£…çº¸å¼ çº¹ç† */
            --theme-bg-texture: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAQMAAAAk8RryAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlP/AOW3MEoAAAARElEQVQY02NggAJfMJRcQAAA4YAhAW6CCwAAAABJRU5ErkJggg==');

            --theme-header-bg: #000; 
            /* [ä¿®å¤] ä½¿ç”¨ CSS çº¿æ€§æ¸å˜åˆ¶ä½œé‡‘è‰²æ¡çº¹çº¹ç†ï¼Œ100% å…¼å®¹ä¸‹è½½ã€‚*/
            --theme-header-texture: repeating-linear-gradient(
                135deg,
                #b88a00,
                #b88a00 2px,
                #d4af37 2px,
                #d4af37 4px
            );

            --theme-text-main: #d4af37; /* é¦™æ§Ÿé‡‘ */
            --theme-text-sub: #967c3a; /* æš—é‡‘ */
            --theme-accent: #d4af37; /* é‡‘è‰² */
            --theme-border: #5c4d26; /* æš—é‡‘è™šçº¿ */
            --theme-admit-border: #d4af37; /* é‡‘è‰²è¾¹æ¡† */
            
            --theme-shadow: rgba(212, 175, 55, 0.3); /* é‡‘è‰²å…‰æ™•é˜´å½± */
        }

        /* =========================================
           åŸºç¡€é¡µé¢æ ·å¼
        ========================================= */
        body {
            background-color: #0a0a0a; /* ç½‘é¡µèƒŒæ™¯è°ƒå¾—æ›´é»‘ä¸€ç‚¹ï¼Œçªå‡ºç¥¨æ ¹ */
            color: #eee;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h2, button, .controls p { 
            font-family: 'Cinzel', serif;
        }
        h2 { margin-bottom: 10px; font-weight: 400; letter-spacing: 2px; }

        .controls {
            margin-bottom: 40px;
            text-align: center;
            width: 100%;
            max-width: 400px;
        }

        input {
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #333;
            background-color: #222;
            
            /* [ä¿®æ”¹] å­—ä½“é¢œè‰²æ”¹ä¸ºå¤å…¸çº¢ï¼Œä¸è¾¹æ¡†ä¸€è‡´ */
            color: #8E3535; 
            
            width: 70%;
            margin-bottom: 15px;
            font-size: 16px;
            text-align: center;
            font-family: 'Noto Serif TC', serif;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        /* é€‰ä¸­æ—¶çš„è¾¹æ¡†é¢œè‰²ï¼ˆä¿æŒå¤å…¸çº¢ï¼‰ */
        input:focus { 
            border-color: #8E3535; 
            box-shadow: 0 0 10px rgba(142, 53, 53, 0.4);
        }

        button {
            padding: 10px 30px;
            background: linear-gradient(45deg, #8E3535, #a64444);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 14px;
            cursor: pointer;
            letter-spacing: 1px;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(142, 53, 53, 0.4);
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(142, 53, 53, 0.6); }
        
        /* å¯¼æ¼”æ¨¡å¼ä¸‹æŒ‰é’®ä¹Ÿå˜é‡‘ */
        .director-mode-active button {
             background: linear-gradient(45deg, #d4af37, #f2d06b);
             color: #000;
             box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
        }

        /* =========================================
           ç¥¨æ ¹æ ¸å¿ƒæ ·å¼ (åº”ç”¨å˜é‡)
        ========================================= */
        #ticket-container {
            width: 320px; 
            /* åº”ç”¨èƒŒæ™¯è‰²å’Œçº¹ç† */
            background-color: var(--theme-bg-color);
            background-image: var(--theme-bg-texture);
            /* æ··åˆæ¨¡å¼è®©çº¹ç†æ›´è‡ªç„¶ */
            background-blend-mode: multiply;
            
            color: var(--theme-text-main);
            border-radius: 8px;
            /* é˜´å½±ä¹Ÿè·Ÿéšä¸»é¢˜å˜è‰² */
            box-shadow: 0 20px 40px var(--theme-shadow);
            overflow: hidden;
            position: relative;
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .ticket-header {
            background-color: var(--theme-header-bg);
            /* åº”ç”¨Headerçº¹ç† */
            background-image: var(--theme-header-texture);
            height: 20px; /* ç¨å¾®å¢é«˜ä»¥å±•ç¤ºèŠ±çº¹ */
            width: 100%;
            transition: all 0.6s;
        }

        .ticket-body {
            padding: 30px 25px 15px 25px;
            text-align: center;
            /* è™šçº¿é¢œè‰²è·Ÿéšä¸»é¢˜ */
            border-bottom: 2px dashed var(--theme-border);
            position: relative;
            transition: border-color 0.6s;
        }

        .ticket-body::before, .ticket-body::after {
            content: '';
            position: absolute;
            bottom: -10px;
            width: 20px;
            height: 20px;
            background-color: #0a0a0a; /* å¿…é¡»å’Œç½‘é¡µèƒŒæ™¯ä¸€è‡´ */
            border-radius: 50%;
        }
        .ticket-body::before { left: -10px; }
        .ticket-body::after { right: -10px; }

        .film-title {
            font-family: 'Noto Serif TC', serif;
            font-size: 28px;
            font-weight: 700;
            margin: 5px 0 10px 0;
            letter-spacing: 3px;
            color: var(--theme-text-main); /* è·Ÿéšä¸»é¢˜ */
            transition: color 0.6s;
        }

        .film-subtitle {
            font-family: 'Cinzel', serif;
            font-size: 14px;
            color: var(--theme-text-sub); /* è·Ÿéšä¸»é¢˜ */
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 5px;
            font-weight: 700;
            transition: color 0.6s;
        }
        
        .starring {
            font-family: 'Cinzel', serif;
            font-size: 10px; 
            color: var(--theme-text-sub); /* è·Ÿéšä¸»é¢˜ */
            margin-bottom: 15px;
            letter-spacing: 1px;
            transition: color 0.6s;
        }

        .project-note {
            font-family: 'Noto Serif TC', serif;
            font-size: 10px;
            color: var(--theme-accent); /* è·Ÿéšä¸»é¢˜å¼ºè°ƒè‰² */
            letter-spacing: 1px;
            margin-top: 15px; 
            opacity: 0.8;
            transition: color 0.6s;
        }

        /* å¯¼æ¼”å½©è›‹æ–‡å­— */
        .secret-message {
            height: 0; /* é»˜è®¤é«˜åº¦ä¸º0ï¼Œå®ç°å¹³æ»‘å±•å¼€ */
            overflow: hidden;
            opacity: 0;
            font-size: 11px;
            color: var(--theme-accent);
            font-family: 'Noto Serif TC', serif;
            margin-top: 0;
            letter-spacing: 2px;
            font-weight: bold;
            transition: all 0.6s;
        }
        
        .director-mode .secret-message {
            height: auto;
            opacity: 1;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--theme-border);
        }

        .info-grid {
            display: flex;
            justify-content: space-between;
            font-family: 'Cinzel', serif;
            font-size: 10px;
            color: var(--theme-text-sub); /* è·Ÿéšä¸»é¢˜ */
            margin-top: 20px;
            text-align: left;
            transition: color 0.6s;
        }

        .info-item span {
            display: block;
            font-weight: 700;
            color: var(--theme-text-main); /* è·Ÿéšä¸»é¢˜ */
            font-size: 14px;
            margin-top: 2px;
            font-family: 'Helvetica Neue', sans-serif;
            transition: color 0.6s;
        }

        .ticket-stub {
            padding: 15px 25px;
            /* èƒŒæ™¯è‰²è·Ÿéšä¸»é¢˜ */
            background-color: var(--theme-bg-color);
            background-image: var(--theme-bg-texture);
            background-blend-mode: multiply;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.6s;
        }

        .guest-name {
            font-family: "Courier New", Courier, monospace;
            font-size: 16px;
            font-weight: bold;
            color: var(--theme-accent); /* è·Ÿéšä¸»é¢˜å¼ºè°ƒè‰² */
            text-transform: uppercase;
            max-width: 180px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: color 0.6s;
        }

        .admit-one {
            font-family: 'Cinzel', serif;
            font-size: 9px;
            color: var(--theme-text-sub);
            letter-spacing: 1px;
            border: 1px solid var(--theme-text-sub); /* è¾¹æ¡†è·Ÿéšå‰¯æ ‡é¢˜è‰² */
            padding: 3px 6px;
            transition: all 0.6s;
        }
        /* å¯¼æ¼”æ¨¡å¼ä¸‹ Admit One æ›´é†’ç›® */
        .director-mode .admit-one {
             color: var(--theme-accent);
             border-color: var(--theme-accent);
             font-weight: bold;
        }
        
        /* æ¡å½¢ç  */
        .barcode {
            height: 25px;
            width: 100%;
            /* æ¡å½¢ç çº¹ç† */
            background: linear-gradient(to right, currentColor 0%, currentColor 3%, transparent 3%, transparent 5%, currentColor 5%, currentColor 8%, transparent 8%, transparent 10%, currentColor 10%, currentColor 15%, transparent 15%, transparent 18%, currentColor 18%, currentColor 25%, transparent 25%, transparent 30%, currentColor 30%, currentColor 45%, transparent 45%, transparent 50%, currentColor 50%, currentColor 55%, transparent 55%, transparent 60%, currentColor 60%, currentColor 70%, transparent 70%, transparent 80%, currentColor 80%, currentColor 100%);
            margin-top: 15px;
            opacity: 0.6;
            color: #000; /* é»˜è®¤é»‘è‰² */
            transition: color 0.6s;
        }
        .director-mode .barcode {
            color: var(--theme-text-sub); /* å¯¼æ¼”æ¨¡å¼å˜æš—é‡‘è‰² */
            opacity: 0.8;
        }

        .footer-note {
            margin-top: 20px;
            font-size: 12px;
            color: #666;
            font-family: 'Cinzel', serif;
        }

    </style>
</head>
<body id="main-body">

    <div class="controls">
        <h2>ARS AMATORIA</h2>
        <p style="font-size: 12px; color: #999; margin-bottom: 15px;">Please enter your name to retrieve ticket</p>
        <input type="text" id="nameInput" placeholder="..." maxlength="25">
        <br>
        <button onclick="downloadTicket()" id="dl-btn">GET TICKET</button>
    </div>

    <div id="ticket-container">
        <div class="ticket-header"></div>
        <div class="ticket-body">
            <div class="film-subtitle">Ars Amatoria</div>
            <div class="film-title">ã€Šæ„›çš„è—è¡“ã€‹</div>
            
            <div class="starring">STARRING: NoFear Ã— QingRong</div>
            
            <div class="barcode"></div>

            <div class="info-grid">
                <div class="info-item">
                    DATE
                    <span id="ticket-date">DEC 24</span>
                </div>
                <div class="info-item">
                    TIME
                    <span id="ticket-time">18:00</span>
                </div>
                <div class="info-item">
                    SEAT
                    <span id="seat-type">VIP</span>
                </div>
            </div>

            <div class="project-note">æ¡ƒçµ¨2025è–èª•ä¼åŠƒ</div>
            
            <div class="secret-message">
                â€” æ„Ÿè¬æ‚¨æ§‹å»ºäº†é€™å€‹ä¸–ç•Œ â€”
            </div>
        </div>
        
        <div class="ticket-stub">
            <div>
                <div style="font-size: 9px; color: var(--theme-text-sub); font-family:'Cinzel',serif; transition: color 0.6s;" id="role-label">GUEST</div>
                <div class="guest-name" id="display-name">AUDIENCE</div>
            </div>
            <div class="admit-one">ADMIT ONE</div>
        </div>
    </div>

    <div class="footer-note">Created for NoFear Ã— QingRong</div>

    <script>
        // ğŸ”¥ è¿™é‡Œæ˜¯æ‰€æœ‰è€å¸ˆçš„æ—¶é—´è¡¨ ğŸ”¥
        // å·¦è¾¹æ˜¯IDï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼Œå³è¾¹æ˜¯æ—¶é—´
        const scheduleData = {
            "1cho": { date: "DEC 24", time: "18:00" },
            "å¦‚æœè¦è®©æˆ‘æ¥è®²è¿™ä¸ªæ•…äº‹": { date: "DEC 24", time: "20:00" },
            "ç¥š": { date: "DEC 24", time: "22:00" },
            "é€™å£¹ç‰‡çç æµ·": { date: "DEC 24", time: "24:00" },
            "é›ªæ¢¨": { date: "DEC 25", time: "08:00" },
            "palpitate_51": { date: "DEC 25", time: "10:00" },
            "debrisoo": { date: "DEC 25", time: "12:00" },
            "è”“è¶Šè“è„†æ›²å¥‡": { date: "DEC 25", time: "14:00" },
            "è¿‡ä¸–è·¯ç²‰": { date: "DEC 25", time: "16:00" },
            "aristolight": { date: "DEC 25", time: "18:00" }
        };

        const nameInput = document.getElementById('nameInput');
        const displayName = document.getElementById('display-name');
        const ticketContainer = document.getElementById('ticket-container');
        const roleLabel = document.getElementById('role-label');
        const seatType = document.getElementById('seat-type');
        const mainBody = document.getElementById('main-body');
        
        const dateEl = document.getElementById('ticket-date');
        const timeEl = document.getElementById('ticket-time');

        nameInput.addEventListener('input', function() {
            const inputVal = this.value.trim();
            const inputKey = inputVal.toLowerCase();
            
            if (inputVal === "") {
                displayName.innerText = "AUDIENCE";
            } else {
                displayName.innerText = inputVal;
            }

            if (scheduleData[inputKey]) {
                // === å‘½ä¸­è€å¸ˆ ID ===
                ticketContainer.classList.add('director-mode');
                mainBody.classList.add('director-mode-active');
                
                roleLabel.innerText = "DIRECTOR";
                seatType.innerText = "CREW";

                dateEl.innerText = scheduleData[inputKey].date;
                timeEl.innerText = scheduleData[inputKey].time;

            } else {
                // === æ™®é€šè§‚ä¼— ===
                ticketContainer.classList.remove('director-mode');
                mainBody.classList.remove('director-mode-active');
                
                roleLabel.innerText = "GUEST";
                seatType.innerText = "VIP";

                dateEl.innerText = "DEC 24";
                timeEl.innerText = "18:00";
            }
        });

        function downloadTicket() {
            const ticket = document.getElementById("ticket-container");
            const originalShadow = ticket.style.boxShadow;
            ticket.style.boxShadow = 'none'; // å»æ‰é˜´å½±é¿å…æˆªå›¾é»‘è¾¹

            html2canvas(ticket, {
                scale: 3, 
                backgroundColor: null, 
                useCORS: true,
                allowTaint: true // å…è®¸è·¨åŸŸå›¾ç‰‡æ¸²æŸ“
            }).then(canvas => {
                ticket.style.boxShadow = originalShadow; // æ¢å¤é˜´å½±
                const link = document.createElement('a');
                link.download = 'Ars_Amatoria_Ticket.png';
                link.href = canvas.toDataURL("image/png");
                link.click();
            }).catch(err => {
                // å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œå¼¹å‡ºæç¤º
                alert("æŠ±æ­‰ï¼Œè‡ªåŠ¨ä¸‹è½½å¤±è´¥ã€‚è¯·ç›´æ¥ä½¿ç”¨æ‰‹æœºæˆªå›¾åŠŸèƒ½ä¿å­˜ç¥¨æ ¹ã€‚");
                ticket.style.boxShadow = originalShadow;
            });
        }
    </script>
</body>
</html>
